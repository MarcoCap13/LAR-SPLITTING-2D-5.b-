<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Studio Esecutivo · LARSplitting2D.jl</title><link href="https://fonts.googleapis.com/css?family=Lato|Roboto+Mono" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.0/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.0/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.0/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.11.1/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="assets/documenter.js"></script><script src="siteinfo.js"></script><script src="../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit">LARSplitting2D.jl</span></div><form class="docs-search" action="search.html"><input class="docs-search-query" id="documenter-search-query" name="q" type="text" placeholder="Search docs"/></form><ul class="docs-menu"><li><a class="tocitem" href="index.html">Home</a></li><li><span class="tocitem">Documentazione</span><ul><li><a class="tocitem" href="relazione_preliminare.html">Studio Preliminare</a></li><li class="is-active"><a class="tocitem" href="relazione_esecutiva.html">Studio Esecutivo</a><ul class="internal"><li><a class="tocitem" href="#Obiettivi:"><span>Obiettivi:</span></a></li><li class="toplevel"><a class="tocitem" href="#RELAZIONE-DEL-PROGETTO"><span>RELAZIONE DEL PROGETTO</span></a></li><li><a class="tocitem" href="#Studio-delle-funzioni-ottimizzate"><span>Studio delle funzioni ottimizzate</span></a></li><li class="toplevel"><a class="tocitem" href="#"><span></span></a></li><li><a class="tocitem" href="#Funzioni-aggiuntive-create"><span>Funzioni aggiuntive create</span></a></li><li><a class="tocitem" href="#Grafo-delle-dipendenze-aggiornato"><span>Grafo delle dipendenze aggiornato</span></a></li></ul></li><li><a class="tocitem" href="relazione_definitiva.html">Studio Definitivo</a></li></ul></li><li><a class="tocitem" href="docs2d.html">Docstring</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><nav class="breadcrumb"><ul class="is-hidden-mobile"><li><a class="is-disabled">Documentazione</a></li><li class="is-active"><a href="relazione_esecutiva.html">Studio Esecutivo</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href="relazione_esecutiva.html">Studio Esecutivo</a></li></ul></nav><div class="docs-right"><a class="docs-edit-link" href="https://github.com/MarcoCap13/LAR-SPLITTING-2D-5.b-/blob/master/docs/src/relazione_esecutiva.md" title="Edit on GitHub"><span class="docs-icon fab"></span><span class="docs-label is-hidden-touch">Edit on GitHub</span></a><a class="docs-settings-button fas fa-cog" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-sidebar-button fa fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a></div></header><article class="content" id="documenter-page"><h1 id="Relazione-II:-studio-esecutivo-LAR-Splitting-2D"><a class="docs-heading-anchor" href="#Relazione-II:-studio-esecutivo-LAR-Splitting-2D">Relazione II: studio esecutivo LAR Splitting 2D</a><a id="Relazione-II:-studio-esecutivo-LAR-Splitting-2D-1"></a><a class="docs-heading-anchor-permalink" href="#Relazione-II:-studio-esecutivo-LAR-Splitting-2D" title="Permalink"></a></h1><p><em>Studenti: Caponi Marco, Ceneda Gianluca</em></p><p>Prime analisi, test e possibili ottimizzazioni sul progetto LAR SPLITTING 2D con l’utilizzo della seguente repository:</p><ul><li><p>Main repository: https://github.com/MarcoCap13/LAR-SPLITTING-2D-5.b-</p><ul><li>https://github.com/cvdlab/LinearAlgebraicRepresentation.jl/blob/master/src/refactoring.jl</li></ul></li></ul><h2 id="Obiettivi:"><a class="docs-heading-anchor" href="#Obiettivi:">Obiettivi:</a><a id="Obiettivi:-1"></a><a class="docs-heading-anchor-permalink" href="#Obiettivi:" title="Permalink"></a></h2><ul><li>Studio del progetto <strong>LAR SPLITTING 2D</strong> e di tutte le funzioni e strutture dati utilizzate.</li><li>Descrizione di ogni task individuata, tipo e significato di ogni parametro ed eventuale valore di ritorno.</li><li>Suddivisione delle tipologie di funzioni e creazione di grafi delle dipendenze.</li><li>Individuare eventuali problemi riscontrati durante lo studio preliminare del codice.</li></ul><h1 id="RELAZIONE-DEL-PROGETTO"><a class="docs-heading-anchor" href="#RELAZIONE-DEL-PROGETTO">RELAZIONE DEL PROGETTO</a><a id="RELAZIONE-DEL-PROGETTO-1"></a><a class="docs-heading-anchor-permalink" href="#RELAZIONE-DEL-PROGETTO" title="Permalink"></a></h1><p>In questa sezione si illustreranno passo passo tutti i vari cambiamenti che sono stati fatti per poter ottimizzare, migliorare il codice e la sua velocità computazionale. Nello specifico abbiamo modificato le funzioni principali della classe <strong>Refactoring</strong>. Per quanto riguarda la parte precedente del codice, è presente una descrizione accurata nella relazione precedente, visitabile all&#39;indirizzo di seguito: https://github.com/MarcoCap13/LAR-SPLITTING-2D-5.b-/blob/main/relazioni/relazione01.md</p><p>Attraverso lo studio preliminare dei metodi di parallelizzazione, siamo riusciti a migliorare alcune funzioni presenti nelle classi principali attraverso l&#39;utilizzo di alcune macro studiate sul libro consigliato dal professore.</p><p>Per poter analizzare l&#39;efficienza delle varie funzioni, abbiamo utilizzato le seguenti macro:</p><ul><li><strong>@btime</strong>: questa macro svolge lo stesso lavoro di <em>@benchmark</em> ma restituisce un output </li></ul><p>meno complesso e più intuitivo, stampando a schermo le velocità di calcolo delle funzioni</p><ul><li><p><strong>@benchmark</strong>: Ci permette di valutare i parametri della funzione in maniera separata; Richiama la funzione più volte per creare un campione dei tempi di esecuzioni restituendo i tempi minimi, massimi e medi.</p></li><li><p><strong>@code_warntype</strong>: ci consente di visualizzare i tipi dedotti dal compilatore, identificando così tutte le instabilità di tipo nel codice preso in esame.</p></li></ul><p>Per quanto riguarda l&#39;ottimizzazione e la parallelizzazione delle funzioni, sono state impiegate le seguenti macro:</p><ul><li><p><strong>@threads</strong>: l&#39;utilizzo di questa macro è fondamentale per indicare a <em>Julia</em>  la presenza di <strong>loop</strong> che identificano <em>regioni multi-thread</em>.</p></li><li><p><strong>@spawn</strong>: identifica uno degli stumenti cardini di <em>Julia</em> per l&#39;assegnazioni dei vari compiti per le task. </p></li></ul><h2 id="Studio-delle-funzioni-ottimizzate"><a class="docs-heading-anchor" href="#Studio-delle-funzioni-ottimizzate">Studio delle funzioni ottimizzate</a><a id="Studio-delle-funzioni-ottimizzate-1"></a><a class="docs-heading-anchor-permalink" href="#Studio-delle-funzioni-ottimizzate" title="Permalink"></a></h2><p>Per vedere nel dettaglio i dati ed i benchmark che riporterò qui di seguito, riporto il link diretto: </p><ul><li>https://github.com/MarcoCap13/LAR-SPLITTING-2D-5.b-/tree/main/docs/benchmark </li></ul><ol><li><strong>spaceIndex</strong>: attraverso lo strumento <em>@code</em>warntype<em>, è emersa un&#39;instabilità in alcune variabili e non dell&#39;intero metodo. Nel particolare sono _type unstable</em>: bboxes, xboxdict, yboxdict, zboxdict, xcovers, ycovers, zcovers ed infine covers.</li></ol><p>Affinando il codice (in altre parole cercando di eliminare i vari if/else che equivalgono ad una cattiva ottimizzazione del codice) e creando un funzione di supporto denominata <em>removeIntersection</em> abbiamo raggiunto i seguenti risultati.     * Tipo: instabile     * Velocità di calcolo:          * iniziale: 108.350 <span>$\mu$</span>s          * modificata: 108.182 <span>$\mu$</span>s</p><ol><li><strong>boundingBox</strong>: sempre attraverso l&#39;utilizzo della funzione denominata <em>@code</em>warntype<em>, è risultata un&#39;instabilità in questo metodo. L&#39;instabilità è dovuta unicamente alla funzione _mapslices</em>.</li></ol><p>Per ovviare a tale problematica abbiamo richiamato la funzione <em>hcat</em> che concatena due array lungo due dimensioni rendendo boundingbox <em>type stable</em> aumentando notevolmente le prestazioni. (per verificarlo abbiamo richiamato <em>@benchmark</em> e comparato i risultati)     * Tipo: instabile     * Velocità di calcolo:          * iniziale:   20.202 <span>$\mu$</span>s          * modificata: 13.282 <span>$\mu$</span>s</p><ol><li><p><strong>boxcovering</strong>: boxcovering è type stable ma la variabile covers è un array di Any. Si procede tipizzando covers e dividendo la funzione in microtask.</p><ul><li>Tipo: stabile</li><li>Velocità di calcolo: <ul><li>iniziale:   8.936 <span>$\mu$</span>s </li><li>modificata: 4.499 <span>$\mu$</span>s</li></ul></li></ul></li><li><p><strong>pointInPolygonClassification</strong>: funzione di notevole importanza nel nostro progetto. In questo caso abbiamo scomposto i vari else/if in tante <em>mono-task</em> per poter alleggerire il codice di quest&#39;ultima.</p></li></ol><p>Nella figura sottostante vedremo come lavora <em>pointInPolygon</em>, denotando tutti quei segmenti che intersecano le facce del poligono preso in esame. Nello specifico nel punto (a) vediamo i singoli segmenti (o linee) che intersecano quest&#39;ultime; Nel punto (b) vengono illustrati tutti quei punti che sono situati esternamente, internamente o sul bordo della faccia del poligono, nel punto (c) vengono cancellati tutti quei segmenti che vanno verso l&#39;esterno della faccia del poligono e per finire vediamo nel punto (d) il risultato finale attraverso il <strong>TGW</strong> in 2D.     * Tipo: stabile     * Velocità di calcolo:          * iniziale:   123.196 <span>$\mu$</span>s         * modificata: 122.009 <span>$\mu$</span>s</p><p><img src="https://github.com/MarcoCap13/LAR-SPLITTING-2D-5.b-/blob/main/docs/plots/images/Schema_pointInPolygon.png?raw=true" alt="Lavoro di pointInPolygonClassification"/></p><h1 id><a class="docs-heading-anchor" href="#"></a><a id="-1"></a><a class="docs-heading-anchor-permalink" href="#" title="Permalink"></a></h1><h3 id="Funzioni-secondarie-utilizzate-dalle-funzioni-principali:-pointInPolygon,-spaceindex,-boxcovering:"><a class="docs-heading-anchor" href="#Funzioni-secondarie-utilizzate-dalle-funzioni-principali:-pointInPolygon,-spaceindex,-boxcovering:">Funzioni secondarie utilizzate dalle funzioni principali: pointInPolygon, spaceindex, boxcovering:</a><a id="Funzioni-secondarie-utilizzate-dalle-funzioni-principali:-pointInPolygon,-spaceindex,-boxcovering:-1"></a><a class="docs-heading-anchor-permalink" href="#Funzioni-secondarie-utilizzate-dalle-funzioni-principali:-pointInPolygon,-spaceindex,-boxcovering:" title="Permalink"></a></h3><ul><li><p>hcat: concatena due array lungo due dimensioni</p></li><li><p>min: restituisce il minimo degli argomenti.</p></li><li><p>max: restituisce il massimo degli argomenti.</p></li><li><p>intersect: restituisce l’intersezione di due insiemi.</p></li><li><p>enumerate : un iteratore che produce (i, x) dove i è un contatore a partire da 1, e x è il valore i-esimo della collezione su cui scorre l&#39;iteratore dato.</p></li><li><p>haskey : determina se una collezione ha una mappatura per una determinata chiave.</p></li><li><p>Mapslices: trasforma le dimensioni date dell&#39;array in input usando una funzione scelta dall’utente. La funzione è chiamata su tutte le dimensioni ( slices ) dell’array.</p></li></ul><h2 id="Funzioni-aggiuntive-create"><a class="docs-heading-anchor" href="#Funzioni-aggiuntive-create">Funzioni aggiuntive create</a><a id="Funzioni-aggiuntive-create-1"></a><a class="docs-heading-anchor-permalink" href="#Funzioni-aggiuntive-create" title="Permalink"></a></h2><p>In questa sezione verranno illustrate tutte le funzioni secondarie da noi utilizzate create per migliorare, alleggerire e semplificare gran parte del codice.</p><ul><li><p><strong>addIntersection</strong>(covers::Array{Array{Int64,1},1}, i::Int64, iterator) aggiunge gli elementi di iterator nell&#39;i-esimo array di covers.</p></li><li><p><strong>createIntervalTree</strong>(boxdict::AbstractDict{Array{Float64,1},Array{Int64,1}}) dato un insieme ordinato, crea un intervalTree; Nel particolare parliamo di una struttura dati che contiene intervalli e che ci consente di cercare e trovare in maniera efficiente tutti gli intervalli che si sovrappongono ad un determinato intervallo o punto.</p></li><li><p><strong>removeIntersection</strong>(covers::Array{Array{Int64,1},1}):</p></li></ul><p>siamo riusciti a rendere più stabile il tutto diminuendo in linea generale i tempi di calcolo della funzione stessa.  Quest&#39;ultima elimina le intersezioni di ogni boundingbox con loro stessi.</p><h2 id="Grafo-delle-dipendenze-aggiornato"><a class="docs-heading-anchor" href="#Grafo-delle-dipendenze-aggiornato">Grafo delle dipendenze aggiornato</a><a id="Grafo-delle-dipendenze-aggiornato-1"></a><a class="docs-heading-anchor-permalink" href="#Grafo-delle-dipendenze-aggiornato" title="Permalink"></a></h2><p>In sintesi, questo <strong>grafo</strong> rappresenta il lavoro svolto sino ad ora con tutte le nuove funzioni create, aggiornate ed aggiunte. I nodi color celeste sono le funzioni di supporto, i nodi colorati di rosso sono le funzioni principali della classe e gli ultimi colorati di blu sono funzioni secondarie equamente importanti alla fine del progetto stesso. Nello specifico il nodo <em>Utility</em>function<em>PointInPolygon</em>1-15_  racchiude tutte le 15 funzioni create per il supporto a PointInPolygonclassification.</p><p><img src="https://github.com/MarcoCap13/LAR-SPLITTING-2D-5.b-/blob/main/docs/plots/images/grafoRefactoring_V2.png?raw=true" alt="Grafo delle dipendenze della classe Refactoring (Aggiornato)"/></p></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="relazione_preliminare.html">« Studio Preliminare</a><a class="docs-footer-nextpage" href="relazione_definitiva.html">Studio Definitivo »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> on <span class="colophon-date" title="Monday 4 July 2022 22:41">Monday 4 July 2022</span>. Using Julia version 1.7.2.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
